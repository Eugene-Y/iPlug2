parameters:
  name: ''
  path: ''
  formatStr: ''
  artifactName: ''
  
steps:   
- bash: |
    outputDir=$BUILD_ARTIFACTSTAGINGDIRECTORY/${{parameters.formatStr}}/${{parameters.name}}
    mkdir -p $outputDir
    cd ${{parameters.path}}/${{parameters.name}}/build-mac/
    zip -r ${{parameters.name}}.zip ${{parameters.name}}.*
    mv ${{parameters.name}}.zip $outputDir
  displayName: Organize artifact

- task: PublishPipelineArtifact@0
  inputs:
    artifactName: 'MAC_${{parameters.formatStr}}_${{ parameters.artifactName }}'
    targetPath: '$(Build.ArtifactStagingDirectory)/${{parameters.formatStr}}/${{parameters.name}}'
  displayName: Publish ${{parameters.name}} ${{parameters.formatStr}}
